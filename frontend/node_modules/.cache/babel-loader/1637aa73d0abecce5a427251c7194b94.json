{"ast":null,"code":"var _jsxFileName = \"/home/eito/Downloads/Project/Heroe-App/frontend/src/components/heroes/EditHeroe.js\";\nimport React, { Component } from 'react';\nimport { Consumer } from '../../context';\nimport TextInputGroup from '../layout/TextInputGroup';\nimport axios from 'axios';\nimport getApiUrl from \"../../helpers/getApiUrl\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass EditHeroe extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      nickname: '',\n      realName: '',\n      originDescription: '',\n      superpowers: '',\n      catchPhrase: '',\n      pathImage: null,\n      errors: {}\n    };\n\n    this.onSubmit = async (dispatch, e) => {\n      e.preventDefault();\n      const {\n        nickname,\n        realName,\n        originDescription,\n        superpowers,\n        catchPhrase\n      } = this.state; //Check for errors\n\n      if (nickname === \"\") {\n        this.setState({\n          errors: {\n            nickname: 'Nickname is required'\n          }\n        });\n        return;\n      }\n\n      if (realName === \"\") {\n        this.setState({\n          errors: {\n            realName: 'RealName is required'\n          }\n        });\n        return;\n      }\n\n      if (originDescription === \"\") {\n        this.setState({\n          errors: {\n            originDescription: 'Description is required'\n          }\n        });\n        return;\n      }\n\n      if (superpowers === \"\") {\n        this.setState({\n          errors: {\n            superpowers: 'Superpowers is required'\n          }\n        });\n        return;\n      }\n\n      if (catchPhrase === \"\") {\n        this.setState({\n          errors: {\n            catchPhrase: 'Catch phrase is required'\n          }\n        });\n        return;\n      }\n\n      const updHeroe = {\n        nickname,\n        realName,\n        originDescription,\n        superpowers,\n        catchPhrase\n      };\n      const {\n        id\n      } = this.props.match.params;\n      const formData = new FormData(); // add form data\n\n      for (var key in newHeroe) {\n        formData.append(key, newHeroe[key]);\n      } // add image\n\n\n      formData.append('image', pathImage);\n      const res = await axios.put(`${getApiUrl()}/update/${id}`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      dispatch({\n        type: 'UPDATE_HEROE',\n        payload: res.data\n      }); //clear State\n\n      this.setState({\n        realName: '',\n        originDescription: '',\n        superpowers: '',\n        catchPhrase: '',\n        errors: {}\n      }); //redirect \n\n      this.props.history.push('/');\n    };\n\n    this.onChange = e => this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  //get heroe info\n  async componentDidMount() {\n    const {\n      id\n    } = this.props.match.params;\n    const res = await axios.get(`${getApiUrl()}/${id}`);\n    const heroe = res.data;\n    this.setState({\n      nickname: heroe.nickname,\n      realName: heroe.realName,\n      originDescription: heroe.originDescription,\n      superpowers: heroe.superpowers,\n      catchPhrase: heroe.catchPhrase,\n      pathImage: null\n    });\n  }\n\n  render() {\n    const {\n      nickname,\n      realName,\n      originDescription,\n      superpowers,\n      catchPhrase,\n      errors\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(Consumer, {\n      children: value => {\n        const {\n          dispatch\n        } = value;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-header text-center\",\n            children: \"Edit Heroe\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: this.onSubmit.bind(this.setState, dispatch),\n              children: [/*#__PURE__*/_jsxDEV(TextInputGroup, {\n                label: \"Name of Heroe\",\n                name: \"nickname\",\n                placeholder: \"Enter heroe name\",\n                value: nickname,\n                onChange: this.onChange,\n                error: errors.nickname\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TextInputGroup, {\n                label: \"Real name of Heroe\",\n                name: \"realName\",\n                placeholder: \"Enter real name\",\n                value: realName,\n                onChange: this.onChange,\n                error: errors.realName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TextInputGroup, {\n                label: \"Description\",\n                name: \"originDescription\",\n                placeholder: \"Enter Description of heroe\",\n                value: originDescription,\n                onChange: this.onChange,\n                error: errors.originDescription\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TextInputGroup, {\n                label: \"Superpowers of Heroe\",\n                name: \"superpowers\",\n                placeholder: \"Enter superpowers\",\n                value: superpowers,\n                onChange: this.onChange,\n                error: errors.superpowers\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TextInputGroup, {\n                label: \"Catch Phrase\",\n                name: \"catchPhrase\",\n                placeholder: \"Enter Catch Phrase\",\n                value: catchPhrase,\n                onChange: this.onChange,\n                error: errors.catchPhrase\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  className: \"btn btn-primary\",\n                  children: \"Update Heroe\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 34\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 25\n        }, this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default EditHeroe;","map":{"version":3,"sources":["/home/eito/Downloads/Project/Heroe-App/frontend/src/components/heroes/EditHeroe.js"],"names":["React","Component","Consumer","TextInputGroup","axios","getApiUrl","EditHeroe","state","nickname","realName","originDescription","superpowers","catchPhrase","pathImage","errors","onSubmit","dispatch","e","preventDefault","setState","updHeroe","id","props","match","params","formData","FormData","key","newHeroe","append","res","put","headers","type","payload","data","history","push","onChange","target","name","value","componentDidMount","get","heroe","render","bind"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Consumer } from '../../context';\nimport TextInputGroup from '../layout/TextInputGroup';\nimport axios from 'axios';\nimport getApiUrl from \"../../helpers/getApiUrl\";\n\n\nclass EditHeroe extends Component {\n\n    state = {\n        nickname: '',\n        realName: '', \n        originDescription: '',\n        superpowers: '',\n        catchPhrase: '',\n        pathImage: null,\n        errors: {}\n    };\n\n    //get heroe info\n    async componentDidMount() {\n        const { id } = this.props.match.params;\n\n        const res = await axios\n            .get(`${getApiUrl()}/${id}`);\n\n\n        const heroe = res.data;\n\n        this.setState({\n            nickname: heroe.nickname,\n            realName: heroe.realName,\n            originDescription: heroe.originDescription,\n            superpowers: heroe.superpowers,\n            catchPhrase: heroe.catchPhrase,\n            pathImage: null,\n        })\n    }\n\n\n    onSubmit = async (dispatch, e) => {\n        e.preventDefault();\n\n        const { nickname, realName, originDescription, superpowers, catchPhrase} = this.state;\n\n    //Check for errors\n        if(nickname === \"\") {\n            this.setState({errors: {nickname: 'Nickname is required'}});\n            return;\n        }\n        if(realName === \"\") {\n            this.setState({errors: {realName: 'RealName is required'}});\n            return;\n        }\n        if(originDescription === \"\") {\n            this.setState({errors: {originDescription: 'Description is required'}});\n            return;\n        }\n        if(superpowers === \"\") {\n            this.setState({errors: {superpowers: 'Superpowers is required'}});\n            return;\n        }\n        if(catchPhrase === \"\") {\n            this.setState({errors: {catchPhrase: 'Catch phrase is required'}});\n            return;\n        }\n\n        const updHeroe = {\n            nickname,\n            realName, \n            originDescription,\n            superpowers,\n            catchPhrase,\n        }\n        const { id } = this.props.match.params;\n\n\n        const formData = new FormData();\n        // add form data\n        for ( var key in newHeroe ) {\n            formData.append(key, newHeroe[key]);\n        }\n        // add image\n        formData.append('image', pathImage);\n\n        const res = await axios\n            .put(`${getApiUrl()}/update/${id}`, formData, {\n                headers: {\n                  'Content-Type': 'multipart/form-data'\n                }\n              })\n\n\n\n\n\n        dispatch({type: 'UPDATE_HEROE', payload: res.data});\n\n        //clear State\n        this.setState({\n            realName: '', \n            originDescription: '',\n            superpowers: '',\n            catchPhrase: '',\n            errors: {}\n        });\n\n        //redirect \n        this.props.history.push('/')\n    };\n\n    onChange = (e) => this.setState({[e.target.name]: e.target.value});\n  \n\n\n\n    render() {\n        const { nickname, realName, originDescription, superpowers, catchPhrase, errors } = this.state;\n\n        return (\n            <Consumer>\n                {value => {\n                    const { dispatch } = value;\n                    return (\n                        <div className=\"card mb-3\">\n                        <div className=\"card-header text-center\">Edit Heroe</div>\n                        <div className=\"card-body\">\n                            <form onSubmit={this.onSubmit.bind(this.setState, dispatch)}>\n                                <TextInputGroup\n                                    label=\"Name of Heroe\"\n                                    name=\"nickname\"\n                                    placeholder=\"Enter heroe name\"\n                                    value={nickname}\n                                    onChange={this.onChange}\n                                    error={errors.nickname}\n                                />\n                                <TextInputGroup\n                                    label=\"Real name of Heroe\"\n                                    name=\"realName\"\n                                    placeholder=\"Enter real name\"\n                                    value={realName}\n                                    onChange={this.onChange}\n                                    error={errors.realName}\n                                />\n                                <TextInputGroup\n                                    label=\"Description\"\n                                    name=\"originDescription\"\n                                    placeholder=\"Enter Description of heroe\"\n                                    value={originDescription}\n                                    onChange={this.onChange}\n                                    error={errors.originDescription}\n                                />\n                                <TextInputGroup\n                                    label=\"Superpowers of Heroe\"\n                                    name=\"superpowers\"\n                                    placeholder=\"Enter superpowers\"\n                                    value={superpowers}\n                                    onChange={this.onChange}\n                                    error={errors.superpowers}\n                                />\n                                <TextInputGroup\n                                    label=\"Catch Phrase\"\n                                    name=\"catchPhrase\"\n                                    placeholder=\"Enter Catch Phrase\"\n                                    value={catchPhrase}\n                                    onChange={this.onChange}\n                                    error={errors.catchPhrase}\n                                />\n                                 <div className=\"text-center\">\n                                    <button type=\"submit\" className=\"btn btn-primary\">Update Heroe</button>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                    )\n                }}\n            </Consumer>\n        )\n        \n    }\n}\n\nexport default EditHeroe;"]},"metadata":{},"sourceType":"module"}